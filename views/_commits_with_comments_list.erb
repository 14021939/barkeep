<%#
  This view snippet is used for a list of code review requests or a list of commits with unresolved comments.
  View arguments:
  - list_id: a string that identifies the list
  - label: a label in the header, such as "For me"
  - labelClass: the class to use for the label (this determines the css style such as background color)
  - header: a string that is displayed above the list
  - review_list: a ReviewList containing an array of ReviewListEntry's
  - current_user_id: the current user id, passed to the next erb file
  - collapsed: true if list should be shown in the collapsed state (only header is displayed)
%>

<% entries = review_list.entries %>
<% token = review_list.token %>
<% page_number = review_list.page_number %>
<div class="review" id="<%= list_id %>">
  <div class="header">
    <div class="dragHandle"></div>
    <div class="name">
      <% if collapsed %>
        <span class="expandCollapseListIcon">+</span>
      <% else %>
        <span class="expandCollapseListIcon">-</span>
      <% end %>
      <span class="tagLabel <%= labelClass %>"><%= label %></span>
      <%= header %>
    </div>
  </div>
  <div class="reviewListBody <%= collapsed ? 'collapsedList' : '' %>">
  <% if entries.empty? %>
    <div class="noResults">None.</div>
    <table class="commitsList" id="<%= list_id %>Table" style="display:none;"><tbody>
    </tbody></table>
  <% else %>
    <div class="noResults" style="display:none;">None.</div>
    <table class="commitsList commitsWithCommentsList" id="<%= list_id %>Table"><tbody>
      <% entries.each do |entry| %>
        <%= erb :_commit_with_comments_entry, :layout => false, :locals => { :entry => entry,
            :current_user_id => current_user_id } %>
      <% end %>
    </tbody></table>

    <div class="pageControls" data-token="<%= token %>">
      <a href="#" class="pageLeftButton pageButton">&laquo;</a>
      <span class="pageNumber"><%= page_number %></span>
      <a href="#" class="pageRightButton pageButton">&raquo;</a>
    </div>
  <% end %>
  </div>
</div>
