<%= @pinion.js_url("/coffee/smart_search.js") %>
<%= @pinion.js_url("/coffee/commit_search.js") %>
<%= @pinion.js_url("/vendor/jquery.easing.1.3.js") %>

<!-- These options apply to all commit lists shown on the page. -->
<% if current_user %>
  <div id="commitSearch" class="searchPanel">
    <table>
      <tr>
        <td>
          <input type="text" name="filter_value" value="" spellcheck="false" />
        </td>
        <td><button class="fancy submit">Search</button></td>
      </tr>
      <tr>
        <td>
          <div class="example">keywords: <span class="keyword">repos, authors, paths, branches</span></div>
          <div class="example">
            <span class="keyword">branches</span> defaults to "master".
            Use <span class="keyword">branches</span>:all to search all branches.
          </div>
        </td>
        <td></td>
      </tr>
    </table>

    <div id="timeRangeOptions">
      <span>Limit to</span>
      <% days_ago = current_user.saved_search_time_period %>
      <select name="time_range" size="1">
        <option <%= "selected" if days_ago == 1 %> value="1">1 day ago</option>
        <option <%= "selected" if days_ago == 3 %> value="3">3 days ago</option>
        <option <%= "selected" if days_ago == 7 %> value="7">1 week ago</option>
        <option <%= "selected" if days_ago == 14 %> value="14">2 weeks ago</option>
        <option <%= "selected" if days_ago == 30 %> value="30">1 month ago</option>
      </select>
    </div>
  </div>

<% else %>
  <div id="signinPrompt" class="commitSearch"><a href="/signin">Sign in</a> to search commits.</p></div>
<% end %>


<div id="savedSearches">
  <% saved_searches.each do |saved_search| %>
    <%= erb :_saved_search, :layout => false, :locals => {
        :saved_search => saved_search, :token => nil, :direction => "before", :page_number => 1 } %>
  <% end %>
</div>
